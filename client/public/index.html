<h2>ユーザ登録</h2>
<label>Name</label><br>
<input type="text" id="name" name="name" maxlength="12" value="" placeholder="mitsue010101"><br>
<label>Address</label><br>
<input type="text" id="email" name="email" value="" placeholder="010101@example.com"><br>
<label>Password</label><br>
<input type="text" id="password" name="password" value="" placeholder="Password0"><br>
<br>
<button onclick="signUp();">signUp</button>

<script>
    function signUp() {
        const url = 'http://localhost:8082/api/users';
        const data = JSON.stringify({
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value
        });
        const xhr = new XMLHttpRequest()
        xhr.withCredentials = true

        xhr.addEventListener('readystatechange', function() {
            if (this.readyState === this.DONE) {
                if (this.status === 200 ) {
                    connectSocket()
                }
            }
        });

        xhr.open('POST', url);
        xhr.setRequestHeader('content-type', 'application/json');
        xhr.send(data);
    }

    function connectSocket() {
        const url = 'ws://localhost:8082/api/ws/connect';
        const socket = new WebSocket(url);

        socket.addEventListener('open', function (event) {
            window.location.href = 'http://localhost:3000/rooms.html';
        });
    }
</script>